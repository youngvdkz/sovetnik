# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–∏–º–∏—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

### –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ (—É–¥–∞–ª–µ–Ω–∞):
- –°–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å—á–µ—Ç–∞ —Å –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ —Å—á–µ—Ç—á–∏–∫–∞–º–∏
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö —Å–º–µ—à–∞–Ω–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

### –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:

#### 1. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç
- –°—á–∏—Ç–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –æ—Ç –Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
- –õ–∏–º–∏—Ç: **10 —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: **–Ω–∞ 7-–º —Å–æ–æ–±—â–µ–Ω–∏–∏** 
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ: **–Ω–∞ 10-–º —Å–æ–æ–±—â–µ–Ω–∏–∏**

#### 2. –û—Ç–¥–µ–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **7-–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: –û—Ç–¥–µ–ª—å–Ω–æ–µ –∫–æ—Ä–æ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –∏ –æ–ø—Ü–∏—è–º–∏
- **10-–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑—é–º–µ –∏ –Ω–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞

#### 3. –ß–µ—Ç–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö
- –í –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ (–Ω–∞—á–∏–Ω–∞—è —Å 8-–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è): `üìä –í–∞—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ: X/10 | –û—Å—Ç–∞–ª–æ—Å—å: Y`
- –í –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–∏: —Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–æ 8-–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è (–Ω–µ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç –æ—Ç –¥–∏–∞–ª–æ–≥–∞)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### models/user.py
- –î–æ–±–∞–≤–ª–µ–Ω `user_message_count` - —Å—á–µ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–µ—Ç–æ–¥—ã `should_show_limit_warning()` –∏ `should_auto_create_summary()`
- –ú–µ—Ç–æ–¥ `start_new_chat_with_summary()` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫

### utils/context.py  
- –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–∏–º–∏—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get_limit_info_text()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–º–∏—Ç–∞—Ö

### handlers/messages.py
- –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `_check_and_handle_limits()` 
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ **–ø–æ—Å–ª–µ** –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
- –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

### keyboards/inline.py
- –ù–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ `get_limit_warning_keyboard()` –¥–ª—è 7-–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### handlers/buttons.py
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `_handle_continue_chat()` –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —á–∞—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª–∏–º–∏—Ç–∞—Ö

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –î–æ 7-–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
```
üí° –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:
[–æ—Ç–≤–µ—Ç]
```
*(–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è)*

### –ù–∞ 7-–º —Å–æ–æ–±—â–µ–Ω–∏–∏  
```
üí° –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:
[–æ—Ç–≤–µ—Ç]
```

**+** –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚ö†Ô∏è –ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –ª–∏–º–∏—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–π

–£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å 3 —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑—é–º–µ.

ü§î –ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?
[üìã –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ] [üìã‚ûïüÜï –†–µ–∑—é–º–µ + –Ω–æ–≤—ã–π —á–∞—Ç]
[‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å (–æ—Å—Ç–∞–ª–æ—Å—å 3)]
```

### –° 8-–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
```
üí° –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:
[–æ—Ç–≤–µ—Ç]

üìä –í–∞—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ: 8/10 | –û—Å—Ç–∞–ª–æ—Å—å: 2
```

### –ù–∞ 10-–º —Å–æ–æ–±—â–µ–Ω–∏–∏
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
```
üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞

–í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏–º–∏—Ç–∞ –≤ 10 —Å–æ–æ–±—â–µ–Ω–∏–π. –Ø —Å–æ–∑–¥–∞–ª —Ä–µ–∑—é–º–µ –Ω–∞—à–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞ 
–∏ –Ω–∞—á–∞–ª –Ω–æ–≤—ã–π —á–∞—Ç, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç!

üìã –†–µ–∑—é–º–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞:
[—Ä–µ–∑—é–º–µ]

‚ú® –¢–µ–ø–µ—Ä—å —É –≤–∞—Å —Å–Ω–æ–≤–∞ 10 –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π!
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ß–µ—Ç–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö  
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –º–µ—à–∞—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö –Ω–µ –æ—Ç–≤–ª–µ–∫–∞–µ—Ç –≤ –Ω–∞—á–∞–ª–µ –¥–∏–∞–ª–æ–≥–∞ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å 8-–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è)
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Å—Ç–∞–ª–æ—Å—å (–∫–æ–≥–¥–∞ —ç—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ)
- ‚úÖ –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –Ω–æ–≤–æ–º—É —á–∞—Ç—É —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ 

## –§–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–Ω–µ—Å–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

### ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–æ:
1. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** üìä - `"üìä –í–∞—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ: X/10 | –û—Å—Ç–∞–ª–æ—Å—å: Y"`
2. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —á–∞—Å—Ç–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π** üìÑ - `"üìÑ –ß–∞—Å—Ç—å X/Y"` (–ø—Ä–∏ —Ä–∞–∑–±–∏–µ–Ω–∏–∏ –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤)
3. **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ª–∏–º–∏—Ç–∞—Ö** ‚ö†Ô∏è - –Ω–∞ 7-–º –∏ 10-–º —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
4. **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** ‚ùå
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö** ‚úÖ - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

### üîÑ –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ "–£—Ö—É...":
- –í—Å–µ —Å—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: `"ü§î –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –≤–æ–ø—Ä–æ—Å..."`, `"üéôÔ∏è –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."`, `"üîä –†–∞—Å–ø–æ–∑–Ω–∞—é —Ä–µ—á—å..."`, `"ü§ñ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é —á–µ—Ä–µ–∑ Gemini..."`, `"üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∞—é—Å—å –Ω–∞ Speech API..."`, `"üìù –†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ: {text}"`, `"üìã –ì–µ–Ω–µ—Ä–∏—Ä—É—é –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä–µ–∑—é–º–µ –¥–∏–∞–ª–æ–≥–∞..."`

### ‚ùå –£–±—Ä–∞–Ω–æ:
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ç–æ–¥–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏** ü§ñ - `"ü§ñ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —á–µ—Ä–µ–∑ {model} (–ø—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ)"`, `"üîß {method}"`
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –≥–æ–ª–æ—Å–∞** üéôÔ∏è - `"üéôÔ∏è **–í–∞—à –≤–æ–ø—Ä–æ—Å:** {text}"`
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** üìà - —É–ø—Ä–æ—â–µ–Ω–∞ –¥–æ `"–°–æ–æ–±—â–µ–Ω–∏–π: X/10, –æ—Å—Ç–∞–ª–æ—Å—å: Y"`
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤** üí° - —É–±—Ä–∞–Ω—ã `"üí° **–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:**"`, `"üìù **–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:**"`, `"üìã **–†–µ–∑—é–º–µ –¥–∏–∞–ª–æ–≥–∞:**"`

### –†–µ–∑—É–ª—å—Ç–∞—Ç —É–ø—Ä–æ—â–µ–Ω–∏—è:
- **–ë–æ–ª–µ–µ —á–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –º–µ–Ω—å—à–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —à—É–º–∞
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å** - "–£—Ö—É..." –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏  
- **–§–æ–∫—É—Å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏** - –æ—Ç–≤–µ—Ç—ã –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ 